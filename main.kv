<MainPage>:
    KeySigTitleBar:
        id: keysigtitlebar
        key_sig_text: keysigchooser.key_sig_text
        root_note_idx: keysigchooser.root_note_idx
        mode_filter: keysigchooser.mode_filter
        scale_text: scaleoptionschooser.scale_text
        notes_to_highlight: scaleoptionschooser.notes_to_highlight
        notes_or_octaves: scaleoptionschooser.notes_or_octaves

    InstrumentRack:
        id: rack
        top: keysigtitlebar.y
        key_sig_title_bar: keysigtitlebar
        root_note_idx: keysigchooser.root_note_idx
        mode_filter: keysigchooser.mode_filter
        notes_to_highlight: scaleoptionschooser.notes_to_highlight
        notes_or_octaves: scaleoptionschooser.notes_or_octaves
        scale_text: scaleoptionschooser.scale_text
        tuning: tuner.tuning

    ChordDisplay:
        id: chorddisplay
        instrument_rack: rack
        root_note_idx: keysigchooser.root_note_idx
        mode_filter: keysigchooser.mode_filter
        tuner_tuning: tuner.tuning

    KeySigChooser:
        id: keysigchooser

    ScaleOptionsChooser:
        id: scaleoptionschooser

    Tuner:
        id: tuner

    Metronome:
        id: metronome

    SongBuilder:
        id: songbuilder
        spt_conn: root.spt_conn
        height: root.height - 50

    # Toolbar
    ToolbarButton:
        id: btn1
        text: 'Tuner'
        pos: (0, 0)
        on_press: tuner.slide()
    ToolbarButton:
        id: btn2
        text: 'Metronome'
        x: btn1.right
        on_press: metronome.slide()
    ToolbarButton:
        id: btn3
        text: 'Choose Key Sig'
        x: btn2.right
        on_press: keysigchooser.slide()
    ToolbarButton:
        id: btn4
        text: 'Highlight Options'
        x: btn3.right
        on_press: scaleoptionschooser.slide()
    ToolbarButton:
        id: btn5
        text: 'Show Piano'
        x: btn4.right
        on_press: rack.fold()
    ToolbarButton:
        id: btn6
        text: 'Show Chord Display'
        x: btn5.right
        on_press: chorddisplay.slide_to_rack(keysigtitlebar)
    ToolbarButton:
        id: btn7
        text: 'Song Builder'
        x: btn6.right
        on_press: songbuilder.slide(keysigtitlebar)
    ToolbarButton:
        id: btn8
        text: 'Song Library'
        x: btn7.right
        on_press: root.show_song_library()
    ToolbarButton:
        id: btn9
        text: 'Log in to Spotify'
        x: btn8.right
        on_press: root.show_spotify_login_popup()
<ToolbarButton@Button>:
    size_hint: [None, None]
    size: [150, 50]
