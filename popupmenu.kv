#: import pua popupmenu


#[PopUpMenuItemTitle@Label]:
#    text: ctx.title
#    normal_background: ctx.item.background_normal if ctx.item.collapse else ctx.item.background_selected
#    disabled_background: ctx.item.background_disabled_normal if ctx.item.collapse else ctx.item.background_disabled_selected
#    canvas.before:
#        Color:
#            rgba: self.disabled_color if self.disabled else self.color
#        BorderImage:
#            source: self.disabled_background if self.disabled else self.normal_background
#            pos: self.pos
#            size: self.size
#        PushMatrix
#        Translate:
#            xy: self.center_x, self.center_y
#        Rotate:
#            angle: 90 if ctx.item.orientation == 'horizontal' else 0
#            axis: 0, 0, 1
#        Translate:
#            xy: -self.center_x, -self.center_y
#    canvas.after:
#        PopMatrix


<PopUpMenu>:
    pos_hint: {"center_x": 0.5, "y": 0}
    orientation: "vertical"
    tuning: tuner.tuning
    num_frets: numfretschanger.num_frets
    root_note_idx: keysigchooser.root_note_idx
    mode_filter: keysigchooser.mode_filter
    PopUpMenuItem:
        title: "Menu"
        TabbedPanel:
            do_default_tab: False
            TabbedPanelItem:
                text: "Tuner"
                BoxLayout:
                    Tuner:
                        id: tuner
                    NumFretsChanger:
                        id: numfretschanger
                        box_height: tuner.box_height
                        box_width: tuner.box_width
                    BoxLayout:
            TabbedPanelItem:
                text: "Key Signature"
                BoxLayout:
                    orientation: "horizontal"
                    BoxLayout:
                        orientation: "vertical"
                        KeySigChooser:
                            id: keysigchooser
                        KeySigDisplay:
                            id: keysigdisplay
                            root_note_idx: keysigchooser.root_note_idx
                            mode_filter: keysigchooser.mode_filter
                    FloatLayout:


# Trying to overwrite <AccordionItem> in /kivy/data/style.kv so that the container_title
# can be smaller / modified to more of a "pop up" button. Not working.
#
#<PopUpMenuItem>:
#    container: container
#    container_title: container_title
#
#    BoxLayout:
#        orientation: root.orientation
#        pos: root.pos
#        BoxLayout:
#            size_hint_x: None if root.orientation == 'horizontal' else 0.1
#            size_hint_y: None if root.orientation == 'vertical' else 1
#            width: root.min_space if root.orientation == 'horizontal' else 100
#            height: root.min_space if root.orientation == 'vertical' else 100
#            id: container_title
#        StencilView:
#            id: sv
#            BoxLayout:
#                id: container
#                pos: sv.pos
#                size: root.content_size